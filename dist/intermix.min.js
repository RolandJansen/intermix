(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
"use strict";var Intermix=_dereq_("./core.js")||{};Intermix.SoundWave=_dereq_("./SoundWave.js"),Intermix.Sound=_dereq_("./Sound.js"),Intermix.Sequencer=_dereq_("./Sequencer.js"),Intermix.Part=_dereq_("./Part.js"),module.exports=Intermix;
},{"./Part.js":3,"./Sequencer.js":4,"./Sound.js":5,"./SoundWave.js":6,"./core.js":7}],2:[function(_dereq_,module,exports){
var bundleFn=arguments[3],sources=arguments[4],cache=arguments[5],stringify=JSON.stringify;module.exports=function(r){for(var e,t=Object.keys(cache),n=0,o=t.length;o>n;n++){var a=t[n],i=cache[a].exports;if(i===r||i["default"]===r){e=a;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var s={},n=0,o=t.length;o>n;n++){var a=t[n];s[a]=a}sources[e]=[Function(["require","module","exports"],"("+r+")(self)"),s]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[e]=e,sources[u]=[Function(["require"],"var f = require("+stringify(e)+");(f.default ? f.default : f)(self);"),f];var c="("+bundleFn+")({"+Object.keys(sources).map(function(r){return stringify(r)+":["+sources[r][0]+","+stringify(sources[r][1])+"]"}).join(",")+"},{},["+stringify(u)+"])",l=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(l.createObjectURL(new Blob([c],{type:"text/javascript"})))};
},{}],3:[function(_dereq_,module,exports){
"use strict";var Part=function(t,n){if(this.audioCtx,this.instrument,this.resolution=16,this.length=1,this.name="Part",this.data,this.pattern=[],this.monophonic=!1,this.zeroPoint=0,!t||!n)throw new Error("Failed to initialize part. AudioCtx and/or instrument missing.");this.audioCtx=t,this.instrument=n,this.initPart()};Part.prototype.initPart=function(){this.pattern=this.initPattern(this.length),this.data={name:this.name,instrument:this.instrument,resolution:this.resolution,pattern:this.pattern}},Part.prototype.initPattern=function(t){for(var n=[],i=0;64*t>i;i++)n[i]=[];return n},Part.prototype.addEvent=function(t,n){return this.pattern[n].push(t),this},Part.prototype.removeEvent=function(){},Part.prototype.clearPattern=function(){return this.pattern=[],this},Part.prototype.getLength=function(){return this.pattern.length},Part.prototype.extendOnStart=function(t,n){var i=64*n,r=this.initPattern(i);return t.push.apply(r,t)},Part.prototype.extendOnEnd=function(t,n){var i=64*n,r=this.initPattern(i);return t.push.apply(t,r)},module.exports=Part;
},{}],4:[function(_dereq_,module,exports){
"use strict";var work=_dereq_("webworkify"),Sequencer=function(e){var t=this;this.audioCtx=e,this.beatsPerMinute=120,this.resolution=16,this.interval=100,this.lookahead=.125,this.now,this.timePerStep,this.nextStepTime=0,this.queue=[],this.runQueue=[],this.nextStep=0,this.loop=!1,this.loopStart,this.loopEnd,this.timePerStep=this.setTimePerStep(this.beatsPerMinute,this.resolution),this.scheduleWorker=work(_dereq_("./scheduleWorker.js")),this.scheduleWorker.onmessage=function(e){"tick"===e.data&&t.scheduler()},this.scheduleWorker.postMessage({message:this.interval})};Sequencer.prototype.scheduler=function(){for(this.now=this.audioCtx.currentTime,0===this.nextStepTime&&(this.nextStepTime=this.now);this.nextStepTime<this.now+this.lookahead;)this.queue[this.nextStep]&&this.runQueue.push(this.noteQueue[this.nextStep]),this.runQueue.forEach(function(e,t){var s=e.shift();s&&s.forEach(function(s){s.note?s.sound.play(this.nextStepTime):s.controller,0===e.length&&this.runQueue.splice(t,1)})}),this.nextStepTime+=this.timePerStep,this.loop&&this.nextStep>=this.loopEnd?(this.nextStep=this.loopStart,this.runQueue=[]):this.nextStep++},Sequencer.prototype.start=function(){this.scheduleWorker.postMessage("start")},Sequencer.prototype.stop=function(){this.scheduleWorker.postMessage("stop"),this.runQueue=[]},Sequencer.prototype.addPart=function(e,t){this.queue[t]||(this.queue[t]=[]),this.queue[t].push(e)},Sequencer.prototype.createNoteEvent=function(e,t){return{note:e,length:t}},Sequencer.prototype.setTimePerStep=function(e,t){return 240/(e*t)},module.exports=Sequencer;
},{"./scheduleWorker.js":8,"webworkify":2}],5:[function(_dereq_,module,exports){
"use strict";var Sound=function(t,o){if(this.audioCtx=null,this.buffer=null,this.queue=[],this.loop=!1,this.isPaused=!1,this.gainNode=null,this.pannerNode=null,this.soundLength=0,this.startOffset=0,this.startTime=0,this.loopStart=0,this.loopEnd=null,!o||!t)throw new Error("Error initialising Sound object: parameter missing.");this.audioCtx=t,this.buffer=o,this.soundLength=this.loopEnd=o.duration,this.setupAudioChain()};Sound.prototype.setupAudioChain=function(){this.gainNode=this.audioCtx.createGain(),this.pannerNode=this.audioCtx.createStereoPanner(),this.gainNode.connect(this.pannerNode),this.pannerNode.connect(this.audioCtx.destination),this.gainNode.gain.value=1,console.log("audiochain ready")},Sound.prototype.createBufferSource=function(){var t=this,o=this.audioCtx.createBufferSource();return o.buffer=this.buffer,o.connect(this.gainNode),o.onended=function(){console.log("onended fired"),t.destroyBufferSource(o)},o},Sound.prototype.destroyBufferSource=function(t){var o=this;t.disconnect(),this.queue.forEach(function(e,n){e===t&&o.queue.splice(n,1)}),t=null,console.log("BufferSourceNode destroyed"),console.log("queue in queue: "+this.queue.length)},Sound.prototype.play=function(t,o){var e=0;t?(console.log("set start time: "+t),e=t):e=this.audioCtx.currentTime;var n=this.createBufferSource();n.loop=o,this.queue.push(n),n.start(e),this.startOffset=0},Sound.prototype.stop=function(t){t&&(this.startOffset=this.audioCtx.currentTime-this.startTime,this.paused=!1),this.queue.length>0&&this.queue.forEach(function(t){t.stop()})},Sound.prototype.pause=function(){this.isPaused=!0,this.stop(this.isPaused)},Sound.prototype.setLoopStart=function(t){this.loopStart=t*this.soundLength,this.bufferSource.loopStart=this.loopStart},Sound.prototype.setLoopEnd=function(t){this.loopEnd=t*this.soundLength,this.bufferSource.loopEnd=this.loopEnd},Sound.prototype.resetLoop=function(){this.loopStart=0,this.loopEnd=this.soundLength},Sound.prototype.setFrequency=function(t){this.bufferSource.playbackRate.value=t},Sound.prototype.getFrequency=function(){return this.bufferSource.playbackRate.value},Sound.prototype.setTone=function(t){this.bufferSource.detune.value=100*t},Sound.prototype.getTone=function(){return this.bufferSource.detune.value},Sound.prototype.getUID=function(){return Math.random().toString().substr(2,8)},module.exports=Sound;
},{}],6:[function(_dereq_,module,exports){
"use strict";var SoundWave=function(o,t,u){this.audioCtx=null,this.buffer=null,o?this.audioCtx=o:console.log("No AudioContext found");var e=this;t&&this.audioCtx.decodeAudioData(t).then(function(o){e.buffer=o,console.log("buffer created")})};module.exports=SoundWave;
},{}],7:[function(_dereq_,module,exports){
"use strict";var audioCtx=null;!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(audioCtx=new window.AudioContext)}(),module.exports={audioCtx:audioCtx};
},{}],8:[function(_dereq_,module,exports){
"use strict";var timer=null,interval=100;self.onmessage=function(t){"start"===t.data?timer=setInterval(function(){postMessage("tick")},interval):"stop"===t.data?clearInterval(timer):t.data.interval&&(interval=t.data.interval,timer&&(clearInterval(timer),timer=setInterval(function(){postMessage("tick")},interval)))},postMessage("A-Ok","*");
},{}]},{},[1])


//# sourceMappingURL=dist/intermix.map.json